## TODO: Update outputs after completing the module.
name: "dream_differential"
description: Runs a differential expression analysis with dream() from variancePartition R package
keywords:
  - differential
  - expression
  - rnaseq
  - dream
  - variancepartition
tools:
  - "dream":
      description: "Differential expression for repeated measures"
      homepage: "https://www.bioconductor.org/packages/release/bioc/html/variancePartition.html"
      documentation: "https://www.bioconductor.org/packages/release/bioc/manuals/variancePartition/man/variancePartition.pdf"
      tool_dev_url: "https://github.com/DiseaseNeuroGenomics/variancePartition"
      doi: "10.1093/bioinformatics/btaa687"
      licence: ["LGPL >=3"]
      identifier: null
input:
  - - meta:
        type: map
        description: |
          Groovy Map containing run and contrast information. This can be used at the
          workflow level to pass optional parameters to the module, e.g.
          [
            contrast_id: 'treatment_mCherry_hND6',
            contrast_variable: 'treatment',
            contrast_reference: 'mCherry',
            contrast_target: 'hND6',
            blocking_factors: 'sample_number'
          ]
          Plus mandatory `id` and other fields created along the run.
    - samplesheet:
        type: file
        description: Sample sheet file containing sample metadata.
    - counts:
        type: file
        description: |
          Raw TSV or CSV format expression matrix with count data by row and samples
          by column
output:
  - results:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.dream.results.tsv":
          type: file
          description: |
            TSV-format table of differential expression information as output by Dream
          pattern: "*.dream.results.tsv"
  - md_plot:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.dream.mean_difference.png":
          type: file
          description: mean difference plot
          pattern: "*.mean_difference.png"
  - rdata:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.MArrayMM.dream.rds":
          type: file
          description: Serialised MArrayMM object
          pattern: "*.MArrayMM.dream.rds"
  - model:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.dream.model.txt":
          type: file
          description: TXT-format dream model
          pattern: "*.dream.model.tsv"
  - contrasts_png:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.dream.contrasts.png":
          type: file
          description: plot representing the contrast design analyzed
          pattern: "*.dream.contrasts.png"
  - var_png:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.dream.var_plot.png":
          type: file
          description: plot representing the variance analyz done with the package
          pattern: "*.dream.var_plot.png"
  - session_info:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.R_sessionInfo.log":
          type: file
          description: dump of R SessionInfo
          pattern: "*.log"
  - normalised_counts:
      - meta:
          type: map
          description: |
            groovy array with metadata information for the contrast generated
      - "*.normalised_counts.tsv":
          type: file
          description: |
            normalised TSV format expression matrix created with voom
          pattern: "*.normalised_counts.tsv"
  - versions:
      - versions.yml:
          type: file
          description: File containing software versions
          pattern: "versions.yml"
authors:
  - "@alanmmobbs03"
maintainers:
  - "@alanmmobbs03"
